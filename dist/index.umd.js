!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t="undefined"!=typeof globalThis?globalThis:t||self).template=t.template||{},t.template.min=t.template.min||{},t.template.min.js=e())}(this,(function(){"use strict";const t="[intro-tour]:";var e=(...e)=>{console.log(t,...e)},o=(...e)=>{console.error(t,...e)},n=(...e)=>{console.warn(t,...e)};!function(t,e){void 0===e&&(e={});var o=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===o&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}('.intro-tour-outer-container {\n  display: none;\n  cursor: pointer;\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.7);\n  color: #fff;\n  text-align: center;\n  border-radius: 6px;\n  padding: 5px 8px;\n  width: var(--intro-tour-width);\n  height: var(--intro-tour-height); }\n  .intro-tour-outer-container.show {\n    display: flex;\n    align-items: center;\n    justify-content: space-between; }\n    .intro-tour-outer-container.show::after {\n      content: " ";\n      position: absolute;\n      top: 100%;\n      left: 50%;\n      transform: translate(calc(-50% + var(--intro-tour-ox)), var(--intro-tour-oy));\n      border-width: 5px;\n      border-style: solid;\n      border-color: rgba(0, 0, 0, 0.7) transparent transparent transparent; }\n');return class{tooltipOffset=[0,16];overflowOffset=[0,0];tooltipStyle={width:200,height:32};errorHandler=t=>{o(t)};warnHandler=t=>{n(t)};range=null;root=document.createElement("div");constructor(t={}){if(window.introTour)throw new Error("plugin has been initialized. Do not call it again");const{errorHandler:o,warnHandler:n}=t;o&&(this.errorHandler=o),n&&(this.warnHandler=n),this.initEvent(),this.initTooltip(),e("plugin initialization is complete!"),window.introTour=this}initTooltip=()=>{this.root.appendChild(function(...t){const e=document.createDocumentFragment();try{for(let o=0;o<t.length;o+=1){const n=t[o],r=document.createRange().createContextualFragment(n);e.appendChild(r)}}catch(t){o(t)}return e}('<div>\n    <label for="intro-tour-underline">\n        <i class="iconfont intro-tour-underline">\n        <button id="intro-tour-underline">划线</button>\n    </label>\n    <span>评论</span>\n    <span>复制</span>\n</div>\n')),this.root.classList.add("intro-tour-outer-container");const{width:t,height:e}=this.tooltipStyle,[n,r]=this.overflowOffset;this.root.style.setProperty("--intro-tour-width",`${t}px`),this.root.style.setProperty("--intro-tour-height",`${e}px`),this.root.style.setProperty("--intro-tour-ox",`${n}px`),this.root.style.setProperty("--intro-tour-oy",`${r}px`),document.body.appendChild(this.root)};initEvent=()=>{document.addEventListener("mousedown",this.onMousedown),document.addEventListener("mouseup",this.onMouseup),this.root.addEventListener("click",this.onMenuClick)};onMenuClick=t=>{t.stopPropagation(),t.preventDefault(),o(t)};onMouseup=()=>{const t=window.getSelection();if(t){const e=t.getRangeAt(0);e.collapsed?this.warnHandler("range is collapsed"):(this.range=e.cloneRange(),this.showTooltip(this.range))}};onMousedown=()=>{this.root.classList.remove("show")};showTooltip=t=>{const e=t.getBoundingClientRect(),{left:o,top:n,width:r}=e,[i,s]=this.tooltipOffset,{width:a,height:l}=this.tooltipStyle,d=o+r/2-a/2-i,u=n-l-s;this.root.style.left=`${d}px`,this.root.style.top=`${u}px`,this.root.classList.add("show")}}}));
